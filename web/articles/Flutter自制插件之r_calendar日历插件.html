<p><img src="images/r_calendar.png" alt="" /></p>
<h1>r_calendar</h1>
<p><a href="https://pub.dartlang.org/packages/r_calendar"><img src="https://img.shields.io/pub/v/r_calendar.svg" alt="pub package" /></a></p>
<p>ğŸ“…ğŸ“†Flutteræ—¥å†æ’ä»¶ï¼Œæ”¯æŒè‡ªå®šä¹‰æ—¥å†ï¼Œæœˆè§†å›¾/å‘¨è§†å›¾åˆ‡æ¢ã€ç‚¹å‡»æ‹¦æˆªã€å•é€‰ï¼ˆåˆ‡æ¢æœˆè‡ªåŠ¨é€‰ï¼‰ã€å¤šé€‰ï¼ˆæ•£é€‰/èšé€‰ï¼‰
<br>.----------------------------------------------
<br>| <span style='margin-left:20px'>githubåœ°å€:</span>
<br>| <span style='margin-left:20px'><a href="https://github.com/rhymelph/r_calendar">https://github.com/rhymelph/r_calendar</a></span>
<br>| <span style='margin-left:20px'>pubåœ°å€:</span>
<br>| <span style='margin-left:20px'><a href="https://pub.dev/packages/r_calendar">https://pub.dev/packages/r_calendar</a></span>
<br>| <span style='margin-left:20px'>apkä½“éªŒï¼š</span>
<br>| <span style='margin-left:20px'><a href="https://fir.im/2aut">https://fir.im/2aut</a></span>
<br>`----------------------------------------------</p>
<ul>
<li>[âœ”] æœˆè§†å›¾/å‘¨è§†å›¾åˆ‡æ¢</li>
<li>[âœ”] è‡ªå®šä¹‰æ—¥å†</li>
<li>[âœ”] ç‚¹å‡»æ‹¦æˆª</li>
<li>[âœ”] å•é€‰ï¼Œåˆ‡æ¢æœˆ/å‘¨è‡ªåŠ¨é€‰</li>
<li>[âœ”] å¤šé€‰,æ•£é€‰/èšé€‰</li>
</ul>
<h2>1.å¦‚ä½•ä½¿ç”¨.</h2>
<ul>
<li><code>pubspec.yaml</code>æ–‡ä»¶æ·»åŠ ä¾èµ–</li>
</ul>
<pre><code class="language-yaml">dependencies:
    r_calendar: last version
</code></pre>
<ul>
<li>å¯¼å…¥åŒ…</li>
</ul>
<pre><code class="language-dart">import 'package:r_calendar/r_calendar.dart';

</code></pre>
<ul>
<li>å•é€‰æ§åˆ¶å™¨åˆå§‹åŒ–</li>
</ul>
<pre><code class="language-dart">///
/// [selectedDate] é»˜è®¤é€‰ä¸­çš„é‚£å¤©
/// [isAutoSelect] å½“æœˆä»½æ”¹å˜æ—¶ï¼Œæ˜¯å¦è‡ªåŠ¨é€‰ä¸­å¯¹åº”çš„æœˆä»½çš„åŒä¸€å¤©

    RCalendarController controller= RCalendarController.single(
                    selectedDate: DateTime.now(),
                    isAutoSelect: true,);
</code></pre>
<ul>
<li>å¤šé€‰æ§åˆ¶å™¨åˆå§‹åŒ–</li>
</ul>
<pre><code class="language-dart">///
/// [selectedDates] é»˜è®¤é€‰ä¸­çš„æ—¥æœŸæ•°ç»„
/// [isDispersion] æ˜¯å¦æ•£é€‰ï¼Œå¦åˆ™ä¸ºè¿ç»­é€‰ä¸­

    RCalendarController controller = RCalendarController.multiple(
                    selectedDates: [
                        DateTime(2019, 12, 1),
                        DateTime(2019, 12, 2),
                        DateTime(2019, 12, 3),
                    ],
                    isDispersion: true);
</code></pre>
<ul>
<li>å‘¨è§†å›¾/æœˆè§†å›¾ï¼ˆé»˜è®¤æœˆè§†å›¾ï¼‰</li>
</ul>
<pre><code class="language-dart">///
/// [mode] æ¨¡å¼
/// -   RCalendarMode.week å‘¨è§†å›¾æ¨¡å¼
/// -   RCalendarMode.month æœˆè§†å›¾æ¨¡å¼

    RCalendarController controller = RCalendarController.single(
                    mode:RCalendarMode.week);
</code></pre>
<ul>
<li>æ•°æ®å˜åŒ–ç›‘å¬</li>
</ul>
<pre><code class="language-dart">/// æ·»åŠ ç›‘å¬å™¨è§‚å¯Ÿå€¼çš„å˜åŒ–
    RCalendarController controller = RCalendarController.multiple(...)
    ..addListener((){
    // æ˜¯å¦ä¸ºå¤šé€‰
    // controller.isMultiple

    // å•é€‰ä¸‹
    // å½“æœˆä»½æ”¹å˜æ—¶ï¼Œæ˜¯å¦è‡ªåŠ¨é€‰ä¸­å¯¹åº”çš„æœˆä»½çš„åŒä¸€å¤©
    // controller.isAutoSelect
    // å½“å‰é€‰ä¸­çš„æ—¥æœŸ
    // controller.selectedDate;

    // å¤šé€‰
    // æ˜¯å¦æ•£é€‰ï¼Œå¦åˆ™ä¸ºè¿ç»­é€‰ä¸­
    // controller.isDispersion;
    // å½“å‰é€‰ä¸­çš„æ—¥æœŸåˆ—è¡¨
    // controller.selectedDates;

    // å‘¨è§†å›¾/æœˆè§†å›¾
    // controller.mode
    });
</code></pre>
<ul>
<li>è‡ªå®šä¹‰æ—¥å†</li>
</ul>
<pre><code class="language-dart">
class MyRCalendarCustomWidget extends RCalendarCustomWidget {
  // å¦‚æœä½ æƒ³è®¾ç½®ç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸä¸€ï¼Œè¯·æ›´æ”¹MaterialLocalizations çš„firstDayOfWeekIndex
  // æ—¥ ä¸€ äºŒ ä¸‰ å›› äº” å…­
  //æ„å»ºå¤´éƒ¨
  @override
  List&lt;Widget&gt; buildWeekListWidget(BuildContext context,MaterialLocalizations localizations){...};

  // 1 2 3 4 5 6 7
  //æ„å»ºæ™®é€šçš„æ—¥æœŸ
  @override
  Widget buildDateTime(BuildContext context,DateTime time, List&lt;RCalendarType&gt; types){...};

  //   &lt;  2019å¹´ 11æœˆ &gt;
  //æ„å»ºå¹´ä»½å’Œæœˆä»½ å·¦æŒ‡ç¤ºå™¨ã€å³æŒ‡ç¤ºå™¨ï¼Œè¿”å›nullå°±æ²¡æœ‰
  @override
  Widget buildTopWidget(BuildContext context,RCalendarController controller){...};

  //æ˜¯å¦ä¸å¯ç”¨,ä¸å¯ç”¨æ—¶ï¼Œæ— ç‚¹å‡»äº‹ä»¶
  @override
  bool isUnable(DateTime time, bool isSameMonth){...};

  //ç‚¹å‡»æ‹¦æˆªï¼Œå½“è¿”å›trueæ—¶è¿›è¡Œæ‹¦æˆªï¼Œå°±ä¸ä¼šæ”¹å˜é€‰ä¸­æ—¥æœŸ
  @override
  FutureOr&lt;bool&gt; clickInterceptor(BuildContext context,DateTime dateTime){...};

  //å­viewçš„é«˜åº¦
  @override
  double get childHeight=&gt;{...};
}
</code></pre>
<h2>2.ä½¿ç”¨å®ƒ.</h2>
<pre><code class="language-dart">import 'package:flutter/material.dart';
import 'package:r_calendar/r_calendar.dart';

void main() =&gt; runApp(MyApp());
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: MyHomePage(title: 'Flutter Demo Home Page'),
    );
  }
}

class MyHomePage extends StatefulWidget {
  @override
  _MyHomePageState createState() =&gt; _MyHomePageState();
}
class _MyHomePageState extends State&lt;MyHomePage&gt; {
  RCalendarController controller;

  @override
  void initState() {
    super.initState();
    controller = RCalendarController.multiple(selectedDates: [
      DateTime(2019, 12, 1),
      DateTime(2019, 12, 2),
      DateTime(2019, 12, 3),
    ]);
//    controller = RCalendarController.single(selectedDate: DateTime.now(),isAutoSelect: true);
  }

  @override
  void dispose() {
    controller.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: RCalendarWidget(
               controller: controller,
               customWidget: DefaultRCalendarCustomWidget(),
               firstDate: DateTime(1970, 1, 1), //å½“å‰æ—¥å†çš„æœ€å°æ—¥æœŸ
               lastDate: DateTime(2055, 12, 31),//å½“å‰æ—¥å†çš„æœ€å¤§æ—¥æœŸ
             ),
    );
  }
}

</code></pre>
<h2>3.è‡ªå®šä¹‰æ•°æ®(è¯·æ›´æ–°ç‰ˆæœ¬åˆ° v0.1.6)</h2>
<p>ç”¨æˆ·å¯ä»¥é€šè¿‡å°†æ•°æ®è®¾ç½®åˆ°controlleré‡Œé¢ï¼Œç„¶åå†ä»<code>RCalendarCustomWidget</code>é‡Œè·å–</p>
<pre><code class="language-dart">/// åˆå§‹åŒ–æ§åˆ¶å™¨ï¼Œæˆ‘è¿™é‡Œæ˜¯è®¾ç½®è‡ªå®šä¹‰æ•°æ®çš„ç±»å‹ä¸ºList&lt;DateTime&gt;ï¼Œå½“ç„¶ï¼Œä½ å¯ä»¥è®¾ç½®æˆè‡ªå·±éœ€è¦çš„ç±»å‹
/// åœ¨æ„é€ æ–¹æ³•ä¸­æ–°å¢äº†ä¸€ä¸ª`initialData`å‚æ•°ï¼Œç”¨äºåˆå§‹åŒ–ä½ çš„è‡ªå®šä¹‰æ•°æ®
    RCalendarController&lt;List&lt;DateTime&gt;&gt; controller =  RCalendarController.single(
    initialData: [
            DateTime.now(),
            DateTime.now().add(Duration(days: 1)),
            DateTime.now().add(Duration(days: 2)),
          ]
    );

/// å¦‚æœä½ æƒ³æ›´æ”¹è‡ªå®šä¹‰æ•°æ®ï¼Œè¯·ä½¿ç”¨ä¸‹é¢çš„ä¾‹å­ï¼Œæ— éœ€setState
    controller.data = [....];

/// ä½ å¯ä»¥åœ¨RCalendarCustomWidgetè‡ªå®šä¹‰ç±»ä¸­é€šè¿‡contextè·å–å¯¹åº”çš„controller.ç„¶åæ ¹æ®è‡ªå®šä¹‰æ•°æ®è¿›è¡Œæ˜¾ç¤ºåˆ¤æ–­

class MyRCalendarCustomWidget extends RCalendarCustomWidget {
///...
  @override
  Widget buildDateTime(
      BuildContext context, DateTime time, List&lt;RCalendarType&gt; types) {

    // new
    RCalendarController&lt;List&lt;DateTime&gt;&gt; controller =RCalendarMarker.of(context).notifier;
    // new

    //...
   }
///...
</code></pre>
