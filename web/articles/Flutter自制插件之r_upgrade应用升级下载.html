<p><img src="images/r_upgrade.png" alt="" /></p>
<h2>ä»‹ç»</h2>
<p>åœ¨ç§»åŠ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œåº”ç”¨å‡çº§æ˜¯å¿…ä¸å¯å°‘çš„ä¸€ä¸ªç¯èŠ‚ï¼Œæ‰€ä»¥ï¼Œ<a href="https://github.com/rhymelph/r_upgrade">r_upgrade</a>åº”ç”¨å‡çº§æ’ä»¶å°±å‡ºç°äº†ï¼Œè¿™é‡Œå…ˆé¼“æŒæ¬¢è¿ğŸ‘ğŸ‘ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨ä»‹ç»</p>
<h2>r_upgrade</h2>
<p><img src="https://img.shields.io/pub/v/r_upgrade.svg" alt="ç‰ˆæœ¬å·" /></p>
<p>Androidå’ŒIOSçš„å‡çº§åº”ç”¨æ’ä»¶==Flutteråº”ç”¨å‡çº§æ’ä»¶</p>
<h2>å¼€å§‹å§</h2>
<ul>
<li>ä½¿ç”¨æ’ä»¶:</li>
</ul>
<p>åœ¨<code>pubspec.yaml</code>æ–‡ä»¶æ·»åŠ ä¸‹é¢ä»£ç </p>
<pre><code class="language-yaml">dependencies:
  r_upgrade: last version
</code></pre>
<ul>
<li>æ·»åŠ å‡çº§ç›‘å¬</li>
</ul>
<pre><code class="language-dart">RUpgrade.stream.listen((info){
  ///...
});
</code></pre>
<p>info é‡Œé¢åŒ…å«çš„ä¿¡æ¯å¦‚ä¸‹:</p>
<p><code>total</code> åº”ç”¨æ€»å¤§å°,byteså€¼</p>
<p><code>status</code> åº”ç”¨çš„ä¸‹è½½çŠ¶æ€ï¼š</p>
<pre><code>`STATUS_PAUSED`ä¸‹è½½è¢«æš‚åœ

`STATUS_PENDING`ç­‰å¾…ä¸‹è½½

`STATUS_RUNNING`ä¸‹è½½ä¸­

`STATUS_SUCCESSFUL`ä¸‹è½½æˆåŠŸ

`STATUS_FAILED`ä¸‹è½½å¤±è´¥

</code></pre>
<p><code>progress</code> å·²ä¸‹è½½çš„å¤§å°byteså€¼</p>
<p><code>planTime</code> è®¡åˆ’ä¸‹è½½å®Œæˆæ‰€éœ€æ—¶é—´/ç§’</p>
<p><code>address</code> ä¸‹è½½åˆ°æœ¬åœ°çš„åœ°å€è·¯å¾„</p>
<p><code>percent</code> ä¸‹è½½è¿›åº¦ èŒƒå›´<code>0-100</code></p>
<p><code>id</code> å½“å‰ä¸‹è½½ä»»åŠ¡çš„id</p>
<p><code>speed</code> å½“å‰ä¸‹è½½é€Ÿåº¦kb/s</p>
<ul>
<li>ç«‹å³å‡çº§ä½ çš„åº”ç”¨</li>
</ul>
<pre><code class="language-dart">    void upgrade() async {
      int id = await RUpgrade.upgrade(
                 'https://raw.githubusercontent.com/rhymelph/r_upgrade/master/apk/app-release.apk',
                 apkName: 'app-release.apk');
    }
</code></pre>
<ul>
<li>ä½ å¯ä»¥ä½¿ç”¨å‡çº§è¿”å›çš„<code>id</code>è¿›è¡Œå–æ¶ˆä¸‹è½½</li>
</ul>
<pre><code class="language-dart">    void cancel() async {
      bool isSuccess=await RUpgrade.cancel(id);
    }
</code></pre>
<ul>
<li>ä½ å¯ä»¥ä½¿ç”¨å‡çº§è¿”å›çš„<code>id</code>è¿›è¡Œå®‰è£…</li>
</ul>
<pre><code class="language-dart">    void install() async {
      bool isSuccess=await RUpgrade.install(id);
    }
</code></pre>
<ul>
<li>å¦‚æœä½ çš„åº”ç”¨ä¸ºIOSï¼Œä½¿ç”¨æ­¤æ–¹æ³•è·³è½¬åˆ°appStoreè¿›è¡Œä¸‹è½½æ›´æ–°</li>
</ul>
<pre><code class="language-dart">    void iosUpgrade(String url)async{
      RUpgrade.appStore(url);
    }
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼Œåœ¨Androidåº”ç”¨ä¸­ï¼Œè¯·ç¡®ä¿<code>AndroidManifest.xml</code>ä¸­å£°æ˜ä»¥ä¸‹æƒé™ï¼Œå¹¶åœ¨6.0ç³»ç»Ÿä¸Šè¿›è¡ŒåŠ¨æ€æˆæƒï¼Œä¸ç„¶ä¼šè°ƒç”¨å‡çº§æ–¹æ³•å°†æŠ›å‡ºæƒé™å¼‚å¸¸</p>
</blockquote>
<pre><code class="language-xml">    &lt;uses-permission android:name="android.permission.REQUEST_INSTALL_PACKAGES" /&gt;
    &lt;uses-permission android:name="android.permission.INTERNET"/&gt;
    &lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/&gt;
</code></pre>
<h2>æœªæ¥è®¡åˆ’</h2>
<ul>
<li>Androidå¹³å°æ·»åŠ çƒ­æ›´æ–°</li>
<li>æ·»åŠ æš‚åœï¼Œç»§ç»­åŠŸèƒ½</li>
<li>æœªæƒ³å¥½ã€‚ã€‚ã€‚ï¼ˆæ¬¢è¿è¯„è®ºï¼‰</li>
</ul>
